第一步记得到ubuntu的pod中models/Stable-diffusion/sd15去下载基础模型


全部创建命令-----
kubectl apply -f  sd-v15/deployment.yaml
kubectl apply -f  sd-v15/service_inference_multi.yaml
kubectl apply -f  sd-v15/hpa.yaml


删除命令----
kubectl delete  deployment sd-deployment-sd15
kubectl delete  hpa sd-hpa-sd15
kubectl delete  backendconfig sd-backendconfig-sd15
kubectl delete  service sd-service-sd15
kubectl delete  ingress sd-ingress-sd15

重新部署pod(更新镜像)---
kubectl rollout restart deployment sd-deployment-sd15


将deployment的ingress加入到Cloud Armor里面(当ingress创建完成后执行)------
gcloud compute backend-services update $(gcloud compute backend-services list --filter="name~'sd15'" --format="value(name)") --security-policy=sd-web-ui --global  #黄色后缀#"--

用于特殊测试的命令, 将将deployment的ingress安全策略移除(所有ip都可以访问)-----一般不用----------
gcloud compute backend-services update $(gcloud compute backend-services list --filter="name~'sd15'" --format="value(name)") --security-policy="" --global  #黄色后缀#"--